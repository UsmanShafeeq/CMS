[program:myproject_gunicorn]
; Program name in supervisor
directory=/home/appuser/myproject/backend

; Command to run Gunicorn
command=/home/appuser/venv/bin/gunicorn \
    --workers=4 \
    --worker-class=sync \
    --worker-tmp-dir=/dev/shm \
    --timeout=120 \
    --bind=127.0.0.1:8000 \
    --access-logfile=/home/appuser/logs/gunicorn_access.log \
    --error-logfile=/home/appuser/logs/gunicorn_error.log \
    backend.wsgi:application

; Run as user
user=appuser

; Autostart when supervisor starts
autostart=true
autorestart=true
startsecs=10
stopwaitsecs=10
stopasgroup=true
killasgroup=true

; Redirect stderr to stdout (single log file)
redirect_stderr=true
stdout_logfile=/home/appuser/logs/supervisor_gunicorn.log
stdout_logfile_maxbytes=10485760
stdout_logfile_backups=5

; Environment variables
environment=PATH="/home/appuser/venv/bin",HOME="/home/appuser",DJANGO_SETTINGS_MODULE="backend.settings"
